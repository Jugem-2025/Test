<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>わしちゃんとしわちゃんの冒険</title>
  <style>
    body {
      background-color: #CC0000; /* 赤に変更（元の#5a1e1eでも可） */
      color: black; /* 黒 */
      font-size: 24pt; /* 24ポイントにさらに大きく */
      font-family: "Yu Mincho", serif;
      line-height: 1.6;
      padding: 40px;
      overflow: hidden; /* 落下する文字がスクロールバーを出さないように */
    }

    .story {
      text-align: justify; /* 必要であれば文字の均等配置 */
    }

    .story span {
      display: inline-block;
      position: relative; /* transformの基準点 */
      transition: transform 2s ease-out, opacity 2s ease-out; /* 落下時間を長くし、減速感を出す */
      will-change: transform, opacity; /* アニメーションのパフォーマンス改善 */
    }

    .falling {
      /* 画面下部 (80vh) で停止し、左右にブレながら落ちる */
      transform: translateY(80vh) rotateZ(calc(30deg * var(--random-rotation))) translateX(calc(100px * var(--random-x)));
      opacity: 0.1; /* 薄く残る */
    }
  </style>
</head>
<body>
  <div class="story" id="story">
    </div>

  <script>
    // サンプル文章（わしちゃんとしわちゃんの心温まる話 - 約400文字）
    const text = `深い森の奥深く、苔むした大木と、きらめく小川のほとりに、わしちゃんとふわふわのしわちゃんは静かに暮らしていました。彼らの日々は、朝露に濡れた草を踏みしめ、鳥のさえずりに耳を傾けることから始まります。わしちゃんは森の全てを知る賢い存在で、しわちゃんは好奇心旺盛で、どんな小さな発見にも喜びを見出す心優しい子でした。

ある夏の午後、二人はいつもより遠くの、陽の光が届かないほど鬱蒼とした場所へ足を踏み入れました。そこには忘れ去られたような古い祠があり、ひっそりと佇んでいます。しわちゃんが不安そうにわしちゃんの袖を引くと、わしちゃんはそっと手を握り、静かに微笑みました。「大丈夫だよ、しわちゃん。どんな場所にも、きっと美しいものがある。」

その言葉に励まされ、しわちゃんが祠の奥を覗き込むと、そこには光を浴びて七色に輝く小さな石がありました。それはまるで森の記憶そのもののよう。二人はその石を大切に持ち帰り、自分たちの小屋の窓辺に飾りました。以来、その石は彼らの日々を優しく照らし、どんな時も二人の心を温かく満たしてくれる宝物となったのです。

季節は巡り、森は様々な表情を見せますが、わしちゃんとしわちゃんの絆は、あの七色の石のように、永遠に輝き続けています。彼らは互いの存在が、何よりも尊い宝物だと知っていたからです。`;

    const storyContainer = document.getElementById("story");

    // 一文字ずつspanにして挿入
    for (let char of text) {
      const span = document.createElement("span");
      span.textContent = char;
      storyContainer.appendChild(span);
    }

    // 3秒後にランダムに崩れ落ちていく
    setTimeout(() => {
      const spans = Array.from(document.querySelectorAll(".story span"));
      spans.forEach((span, index) => {
        const randomRotation = Math.random() * 2 - 1; // -1から1のランダムな値
        const randomX = Math.random() * 2 - 1; // -1から1のランダムな値
        span.style.setProperty('--random-rotation', randomRotation);
        span.style.setProperty('--random-x', randomX);
        setTimeout(() => {
          span.classList.add("falling");
        }, Math.random() * 2500); // 0〜2.5秒ランダムで落下開始タイミングを調整
      });
    }, 3000); // 最初の3秒待機
  </script>
</body>
</html>
